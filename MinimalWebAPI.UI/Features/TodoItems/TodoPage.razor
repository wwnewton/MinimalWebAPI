@page "/todo"
@using System.Diagnostics.CodeAnalysis
@inject IHttpClientFactory HttpClientFactory;

<PageTitle>Todo</PageTitle>
@foreach(var todoItem in this.todoItems)
{
    <MudCard>
        <MudCardContent>
            <MudText Typo="Typo.h6" Class="mb-2">@todoItem.Title</MudText>
            <MudCheckBox Label="Complete" @bind-Value="todoItem.IsComplete" Disabled="true" />
        </MudCardContent>
    </MudCard>
}


@code {
    private HttpClient todoClient;
    private List<TodoItem> todoItems = new List<TodoItem>();

    override protected async Task OnInitializedAsync()
    {
        this.todoClient = this.HttpClientFactory.CreateClient("todoapi");
        this.todoItems = await this.todoClient.GetFromJsonAsync<List<TodoItem>>("todo-items") ?? new List<TodoItem>();
    }

    private class TodoItem
    {
        public Guid Id { get; set; }
        public string Title { get; set; } = string.Empty;
        public bool IsComplete { get; set; }
    }

}
